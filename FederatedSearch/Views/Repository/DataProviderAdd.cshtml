@*     This file is part of OAI-PMH .Net.
*  
*      OAI-PMH .Net is free software: you can redistribute it and/or modify
*      it under the terms of the GNU General Public License as published by
*      the Free Software Foundation, either version 3 of the License, or
*      (at your option) any later version.
*  
*      OAI-PMH .Net is distributed in the hope that it will be useful,
*      but WITHOUT ANY WARRANTY; without even the implied warranty of
*      MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
*      GNU General Public License for more details.
*  
*      You should have received a copy of the GNU General Public License
*      along with OAI-PMH .Net.  If not, see <http://www.gnu.org/licenses/>.
*----------------------------------------------------------------------------*@

@{
    ViewBag.Title = " Add Data Provider";
    var options = new AjaxOptions()
    {
        Url = "/Repository/DataProvider/AddRepository",
        HttpMethod = "post",
        LoadingElementId = "waiting",
        LoadingElementDuration = 10,
        OnSuccess = "onSuccess"
    }; 
}

<h2>Add Data Provider</h2>
<hr style="margin-top: 0px; padding-top: 0px;" />

@using (Ajax.BeginForm("DataProvider", "Repository", new { id = "AddRepository" }, options))
{
    <div id="failedAdding" style="display: none; color: red; font-weight: bold">
        <p>Adding failed!</p>
    </div>
    <div id="waiting" style="display: none; color: #66afe9; font-weight: bold">
        <p>Waiting for response...</p>
    </div>
    <div class="row">
        <div class="col-md-1" style="padding-right: 0">
            <label for="baseUrl">Base URL: </label>
        </div>
        <div class="col-md-9">
            <input id="baseUrl" name="baseURL" type="text" class="form-control" />
        </div>
        <div class="col-md-2">
            <input type="submit" value="Add" class="btn oaiBtn btn-default" />
        </div>
    </div>
    <br />
}

<script type="text/javascript">

    function onSuccess(response) {
        if (!response.successfull) {
            $("#failedAdding").show("fast");
        }
        else {
            window.location.replace('@Url.Action("DataProvider", "Repository", new { id = "List" })');
        }
    }

</script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
